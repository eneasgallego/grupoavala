function crearWeb() {	var ret = {		getVarsUrl : function() {			var url = location.search.replace("?", "");			var arrUrl = url.split("&");			var urlObj = {};			for (var i = 0; i < arrUrl.length; i++) {				var x = arrUrl[i].split("=");				urlObj[x[0]] = x[1];			}			return urlObj;		},		esMovil : function() {			var dispositivo = navigator.userAgent.toLowerCase();			return (dispositivo.search(/iphone|ipod|ipad|android/) > -1);		},		mostrarWeb : function(pantalla) {			var me = this;			var body = $('body');			body.empty();			if (true || this.esMovil()) {				this.mostrarWebMovil();				body.removeClass('body');				body.addClass('body-movil');			} else {				this.mostrarWebPC(pantalla);				body.removeClass('body-movil');				body.addClass('body');			}		},		mostrarWebPC : function(pantalla) {			var seccion;			if (typeof (pantalla) === 'undefined') {				var vars = this.getVarsUrl();				pantalla = vars.pantalla;				seccion = vars.seccion			}			if (pantalla) {				this.menu.current = pantalla;			}			this.mostrarCabecera();			this.menu.mostrarMenu({				web : this.menu.current,				items : data.menu			}, this);			this.mostrarPie();			this.cuerpo.mostrarCuerpo(this, seccion, pantalla);			this.mostrarPopUp();		},		cambiarPantalla : function(href, seccion) {			var id = this.menu.getTagFromHref(href);			var itemMenu = this.menu.buscarMenu(id);			if (itemMenu !== null) {				if (!itemMenu.noCambiar) {					this.menu.cambiarMenu(id, this);				}				this.cuerpo.mostrarCuerpo(this, seccion, id);			}		},		redimensionarCarteles : function() {			var carteles = $('.cartel');			carteles.show(5000, function() {				for (var i = 0; i < carteles.length; i++) {					var cartel = $(carteles[i]);					var bordes = cartel.children('.cartel-borde');					var borde1 = $(bordes[0]);					var borde2 = $(bordes[1]);					var barHeight = parseInt(borde1.outerHeight(true));					var texts = cartel.children('.cartel-text');					var totalHeight = 0;					for (var j = 0; j < texts.length; j++) {						var text = $(texts[j]);						var height = text.outerHeight();						if (totalHeight < height) {							totalHeight = height;						}					}					var top = totalHeight + barHeight;					borde2.css('top', top);				}			});		},		doResize : function() {			var me = this;			window.onresize = function() {				if (window.innerWidth > 0) {					var isDifferentVista = data.vistas.isDifferentVista(							window.lastWidth, window.innerWidth);					if (isDifferentVista) {						me.mostrarWeb();					} else {						window.lastWidth = window.innerWidth;						var visores = $('.visor-index');						for (var i = 0; i < visores.length; i++) {							var visor = $(visores[i]);							var width = visor.width();							var children = visor.children();							var bar = $(children[0]);							for (var j = 1; j < children.length; j++) {								var item = $(children[j]);								width -= item.outerWidth(true);							}							bar.css('width', width - 1);						}						var clases = [ '.lista-item', '.lista-item-movil' ];						for (var i = 0; i < clases.length; i++) {							var clase = clases[i];							var lista = $(clase);							for (var j = 0; j < lista.length; j++) {								var item = $(lista[j]);								var totalWidth = parseInt(item.width());								var childrenImg = item.children('.lista-image');								var childrenTxt = item										.children('.lista-item-panel');								var img = $(childrenImg[0]);								var imgWidth = parseInt(img.outerWidth(true));								var width = totalWidth - imgWidth - 10;								var text = $(childrenTxt[0]);								text.css('width', width + 'px');							}						}					}				}			};		},		doPlaceholder : function() {			if (!$.support.placeholder) {				var active = document.activeElement;				$(':text').focus(						function() {							if ($(this).attr('placeholder') !== ''									&& $(this).val() == $(this).attr(											'placeholder')) {								$(this).val('').removeClass('hasPlaceholder');							}						})						.blur(								function() {									if ($(this).attr('placeholder') !== ''											&& ($(this).val() === '' || $(this)													.val() == $(this).attr(													'placeholder'))) {										$(this)												.val(														$(this).attr(																'placeholder'))												.addClass('hasPlaceholder');									}								});				$(':text').blur();				$(active).focus();				$('form').submit(function() {					$(this).find('.hasPlaceholder').each(function() {						$(this).val('');					});				});			}		},		parseItems : function(items, imageField) {			var ret = [];			for (var i = 0; i < items.length; i++) {				var item = items[i];				var obj = {};				for ( var key in item) {					var value = item[key];					if (key == imageField) {						if (typeof (value) === 'string') {							value = data.rutas.imagen + value;						} else if (value.length) {							var aux = [];							for (var j = 0; j < value.length; j++) {								var word = value[j];								word = data.rutas.imagen + word;								aux.push(word);							}							value = aux;						}					}					obj[key] = value;				}				ret.push(obj);			}			return ret;		},		crearBoton : function(par) {			var me = this;			var link = $('<a/>', {				href : par.href ? par.href : '#'			});			if (par.href && par.href != '#') {				link.attr('target', '_blank');			}			if (par['class']) {				link.attr('class', par['class']);			}			if (par.imagen) {				var img = $('<img/>', {					src : par.imagen				});				link.append(img);				if (par.tagHover) {					img.on('mouseover', function() {						var own = $(this);						var src = own.attr('src');						src = me.menu.addTag(src, par.tagHover, '.');						own.attr('src', src);					});					img.on('mouseout', function() {						var own = $(this);						var src = own.attr('src');						src = me.menu.removeTag(src, par.tagHover);						own.attr('src', src);					});				}			}			if (par.text) {				link.append(par.text);			}			return link;		},		crearImagen : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : par['class']			});			var img = $('<img/>', {				src : par.src			});			div.append(img);			return div;		},		mostrarRedesSociales : function(id, styles) {			var divRedes = $('<div/>', {				id : id + '-redes'			});			var textStyles = '';			if (styles) {				for ( var key in styles) {					var style = styles[key];					textStyles = key + ': ' + style + ';';				}			}			divRedes.append(this					.crearBoton({						id : id + '-redes-facebook',						imagen : data.rutas.imagen								+ data.redesSociales.facebook.imagen,						href : data.redesSociales.facebook.href,						tagHover : data.redesSociales.tagHover,						'class' : 'boton-red-social',						style : textStyles					}));			divRedes.append(this.crearBoton({				id : id + '-redes-twitter',				imagen : data.rutas.imagen + data.redesSociales.twitter.imagen,				href : data.redesSociales.twitter.href,				tagHover : data.redesSociales.tagHover,				'class' : 'boton-red-social',				style : textStyles			}));			divRedes.append(this.crearBoton({				id : id + '-redes-google',				imagen : data.rutas.imagen + data.redesSociales.google.imagen,				href : data.redesSociales.google.href,				tagHover : data.redesSociales.tagHover,				'class' : 'boton-red-social',				style : textStyles			}));			divRedes.append(this.crearBoton({				id : id + '-redes-rss',				imagen : data.rutas.imagen + data.redesSociales.rss.imagen,				href : data.redesSociales.rss.href,				tagHover : data.redesSociales.tagHover,				'class' : 'boton-red-social',				style : textStyles			}));			return divRedes;		},		mostrarCabecera : function() {			var div = $('<div/>', {				id : 'cabecera',				'class' : 'global-content'			});			$('body').append(div);			div.append(this.mostrarRedesSociales('cabecera'));			var divMovil = $('<div/>', {				id : 'cabecera-movil'			});			div.append(divMovil);			divMovil.append('<img src="' + data.rutas.imagen					+ data.cabecera.imagenes.whatsapp + '"/>');			divMovil.append('<img src="' + data.rutas.imagen					+ data.cabecera.imagenes.line + '"/>');			divMovil.append(data.cabecera.textos.movil);			var divTfno = $('<div/>', {				id : 'cabecera-tfno'			});			div.append(divTfno);			divTfno.append('<img src="' + data.rutas.imagen					+ data.cabecera.imagenes.tfno + '"/>');			divTfno.append(data.cabecera.textos.tfno);		},		menu : {			current : 'inicio',			buscarMenu : function(id) {				for (var i = 0; i < data.menu.length; i++) {					var item = data.menu[i];					if (item.id == id) {						return item;					}				}				return null;			},			mostrarMenu : function(par, parent) {				if (parent) {					this.parent = parent;				}				var div = $('<div/>', {					id : 'menu',					'class' : 'global-content'				});				$('body').append(div);				for (var i = 0; i < par.items.length; i++) {					var item = par.items[i];					var divItem = $('<div/>', {						id : this.generarMenuItemId(item.id),						'class' : 'menu-item'					});					div.append(divItem);					if (i === 0) {						divItem.css('margin-left', '50px');					}					if (this.current == item.id) {						divItem.append(item.text);						divItem.addClass('menu-current');					} else {						divItem.append(this.crearLinkMenu(item,								this.parent.cuerpo));						divItem.removeClass('menu-current');					}				}			},			generarMenuItemId : function(web) {				return 'menu-item-' + web;			},			crearLinkMenu : function(par, cuerpo) {				var me = this;				var link = $('<a/>', {					href : par.id				});				link.append(par.text);				link.on('click', function(e) {					e.preventDefault();					me.parent.cambiarPantalla(this.href);				});				return link;			},			cambiarMenu : function(web, parent) {				var current = this.current;				var next = this.getTagFromHref(web);				if (current != next) {					var jCurrent = $('#' + this.generarMenuItemId(current));					var jNext = $('#' + this.generarMenuItemId(next) + ' a');					var textCurrent = jCurrent.html();					var textNext = jNext.html();					jCurrent.empty();					jCurrent.append(this.crearLinkMenu({						id : current,						text : textCurrent					}, this.parent.cuerpo));					jCurrent.toggleClass('menu-current');					jNext = $('#' + this.generarMenuItemId(next));					jNext.empty();					jNext.append(textNext);					jNext.toggleClass('menu-current');					this.current = next;				}			},			getTagFromHref : function(href) {				var ret = href.split('/');				ret = ret[ret.length - 1];				return ret;			},			addTag : function(text, tag, separator) {				var arr = text.split(separator);				var ret = '';				for (var i = 0; i < arr.length; i++) {					var item = arr[i];					if (i == arr.length - 1) {						ret += tag;					}					if (i > 0) {						ret += separator;					}					ret += item;				}				return ret;			},			removeTag : function(text, tag) {				var arr = text.split(tag);				var ret = '';				for (var i = 0; i < arr.length; i++) {					var item = arr[i];					ret += item;				}				return ret;			}		},		mostrarPie : function() {			var div = $('<div/>', {				id : 'pie',				'class' : 'global-content'			});			$('body').append(div);			for (var i = 0; i < data.pie.parrafos.length; i++) {				var parrafo = data.pie.parrafos[i];				var divParrafo = $('<div/>', {					'class' : 'pie-parrafo'				});				div.append(divParrafo);				for (var j = 0; j < parrafo.length; j++) {					var text = parrafo[j];					divParrafo.append(text);				}			}			div.append(this.mostrarRedesSociales('pie', {				'float' : 'left'			}));			var divLogo = $('<div/>', {				'id' : 'pie-logo'			});			div.append(divLogo);			var divParrafoPie = $('<div/>', {				id : 'pie-pie',				'class' : 'global-content'			});			divParrafoPie.append(data.pie.inferior);			div.append(divParrafoPie);		},		mostrarPopUp : function() {			var div = $('<div/>', {				'class' : 'pop-up'			});			$('body').append(div);			var link = $('<a/>', {				href : '#'			});			div.append(link);			link.on('click', function(e) {				e.preventDefault();			});			var img = $('<img/>', {				src : data.rutas.imagen + data.popup.imagen1			});			img.on('mouseover', function() {				img.attr('src', data.rutas.imagen + data.popup.imagen2);			});			img.on('mouseout', function() {				img.attr('src', data.rutas.imagen + data.popup.imagen1);			});			img.on('mouseleave', function() {				img.attr('src', data.rutas.imagen + data.popup.imagen1);			});			link.append(img);			var divFrame = $(					'<iframe/>',					{						src : 'http://www.panelcliente.net/c2c/simple.php?id=48&memberid=10060'					});			div.append(divFrame);			console.log('top');			var top = 17;			div.css('top', top + 'px');			console.log('left');			console.log($($('#cabecera-movil').children()[0]).position().left);			var left = $($('#cabecera-movil').children()[0]).position().left;			left -= (div.width());			div.css('left', left + 'px');			img.on('click', function() {				divFrame.slideToggle(500);			});		},		cuerpo : {			cambiarCartel : function(cartel) {				var me = this;				var children = cartel.children('.cartel-text');				if (children.length > 1) {					var hidden = [];					var visible = {};					for (var i = 0; i < children.length; i++) {						var child = $(children[i]);						if (child.css('display') == 'none') {							hidden.push(child);						} else {							visible = child;						}					}					visible.delay(2000).fadeOut(1000, function() {						var current = $(this);						var next = current.next('.cartel-text');						if (next.length === 0) {							next = hidden[0];						}						next.fadeIn(1000);						me.cambiarCartel(cartel);					});				}			},			formulario : {				crearTextField : function(par) {					var title = par.title;					if (par.requerido) {						title += '*';					}					var input = $('<input/>', {						name : par.field,						type : 'text',						'class' : 'tasador-textfield',						style : 'width: ' + par.width,						placeholder : title					});					if (par.limite) {						input.attr('maxlength', par.limite);					}					if (par.requerido) {						input.attr('required', 'required');					}					return input;				},				crearTextArea : function(par) {					var title = par.title;					if (par.requerido) {						title += '*';					}					var input = $('<textarea/>', {						name : par.field,						'class' : 'tasador-textarea',						style : 'width: ' + par.width,						placeholder : par.title					});					if (par.requerido) {						input.attr('required', 'required');					}					return input;				},				crearButton : function(par) {					var input = $('<input/>', {						name : par.field,						type : 'button',						'class' : 'tasador-button',						value : par.title ? par.title : 'enviar'					});					input.on('click', function(e) {						par.handler(par.idForm);					});					return input;				},				crearPrivacidad : function() {					var div = $('<div/>', {						'class' : 'tasador-privacidad'					});					for (var i = 0; i < data.tasador.privacidad.texto.length; i++) {						var item = data.tasador.privacidad.texto[i];						if (item.link) {							var link = $('<a/>', {								href : item.link							});							link.append(item.texto);							div.append(link);						} else {							div.append(item.texto);						}					}					return div;				},				mostrarFormulario : function(par) {					var me = this;					var div = $('<div/>', {						id : par.id,						'class' : 'tasador '								+ (par['class'] ? par['class'] : '')					});					if (par.container) {						par.container.append(div);					}					if (par.withTopBorder) {						var divBorder = $('<div/>', {							'class' : 'separador iconos-border-top'						});						div.append(divBorder);					}					div.append($('<h1>' + par.title + '</h1>'), {						'class' : 'tasador-title'					});					var form = $('<form/>', {						id : par.id + '-form'					});					div.append(form);					for (var i = 0; i < par.fields.length; i++) {						var field = par.fields[i];						var item = this['crear' + field.type](field.params);						form.append(item);					}					form.append(this.crearPrivacidad());					form.append(this.crearButton({						idForm : form.attr('id'),						handler : function() {							par.submit(this.idForm, par.origen + '-'									+ web.menu.current);						}					}));					if (par.withBottomBorder) {						var divBorder = $('<div/>', {							'class' : 'separador iconos-border-bottom'						});						div.append(divBorder);					}					return div;				},				crearBarraEnviar : function(par) {					var div = $('<div/>', {						'class' : 'tasador-captcha'					});					par.container.append(div);					var divText = $('<div/>', {						'class' : 'tasador-captcha-text'					});					divText							.append('Introduzca el código mostrado en la imagen:');					div.prepend(divText);					var img = $('<img/>', {						src : 'captcha/captcha.php'					});					div.prepend(img);					div.prepend(this.crearButton({						title : 'CAMBIAR',						handler : function() {							d = new Date();							img.attr('src', '').attr('src',									'captcha/captcha.php?' + d.getTime());						}					}));					var textField = this.crearTextField({						title : 'Captcha',						requerido : true,						field : 'captcha',						width : '20%'					});					div.prepend(textField);					div.prepend(this.crearButton({						handler : par.submit					}));				}			},			tasador : {				mostrarTasador : function(par) {					par.title = data.tasador.title;					par.fields = data.tasador.fields;					par.submit = data.tasador.submit;					par.validar = data.tasador.validar;					par.origen = 'web';					var div = par.formulario.mostrarFormulario(par);					return div;				}			},			mostrarLista : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'lista ' + (par['class'] ? par['class'] : '')				});				if (par.container) {					par.container.append(div);				}				if (par.title) {					var divTitle = $('<div/>', {						id : par.id + '-titulo',						'class' : (par.titleClass ? par.titleClass								: 'lista-title')					});					div.append(divTitle);					divTitle.append(par.title);					if (par.image) {						var divImg = $('<div/>', {							'class' : 'lista-image-title'						});						div.append(divImg);						var img = $('<img/>', {							src : par.image						});						divImg.append(img);					}					var widthTitle = 100;					if (par.titleCartel) {						widthTitle /= 2;						var divCartel = this.mostrarCartel({							id : par.id + '-titulo-cartel',							color : 'claro',							marginTop : '14px',							marginBottom : '14px',							container : div,							text : par.titleCartel						});						divCartel.css('width', widthTitle + '%');						divTitle.css('width', widthTitle + '%');						divTitle.css('margin-bottom', '20px');					}				}				for (var i = 0; i < par.items.length; i++) {					var item = par.items[i];					if (par.container) {						item.container = div;					}					if (typeof (item.separador) === 'undefined') {						item.separador = par.separador;					}					var col = this.mostrarItemLista(item);					if (!par.container) {						div.append(col);					}				}				return div;			},			mostrarItemLista : function(par) {				var div = $('<div/>', {					'class' : 'lista-item'				});				if (par.container) {					par.container.append(div);				}				if (par.separador) {					var divBorder = $('<div/>', {						'class' : 'separador iconos-border-top'					});					div.append(divBorder);				}				var divImage = $('<div/>', {					'class' : 'lista-image'				});				div.append(divImage);				if (par.novedad) {					var divNovedad = $('<div/>', {						'class' : 'lista-image-novedad'					});					divImage.append(divNovedad);				}				if (typeof (par.image) === 'object') {					for (var i = 0; i < par.image.length; i++) {						var image = par.image[i];						var img = $('<img/>', {							'src' : image						});						divImage.append(img);					}				} else {					var img = $('<img/>', {						'src' : par.image					});					divImage.append(img);				}				var totalWidth = parseInt(div.width());				var imageWidth = parseInt(divImage.outerWidth(true));				var width = totalWidth - imageWidth - 1;				var divPanelText = $('<div/>', {					'class' : 'lista-item-panel',					style : 'width: ' + width + 'px'				});				div.append(divPanelText);				var divTitle = $('<div/>', {					'class' : 'lista-item-title'				});				divPanelText.append(divTitle);				divTitle.append(par.title);				var divText = $('<div/>', {					'class' : 'lista-item-text'				});				divPanelText.append(divText);				divText.append(par.text);				return div;			},			mostrarColumnas : function(par) {				var div = $('<div/>', {					'class' : 'global-content columnas'				});				if (par.container) {					par.container.append(div);				}				for (var i = 0; i < par.items.length; i++) {					var item = par.items[i];					var lugar = 'cen';					if (i === 0) {						lugar = 'izq';					} else if (i == par.items.length - 1) {						lugar = 'der';					}					item.lugar = lugar;					if (par.container) {						item.container = div;					}					var col = this.mostrarColumna(item);					if (!par.container) {						div.append(col);					}				}				return div;			},			mostrarColumna : function(par) {				var div = $('<div/>', {					'class' : 'columna'				});				if (par.container) {					par.container.append(div);				}				var divCol = $('<div/>', {					'class' : par.lugar				});				div.append(divCol);				if (par.container) {					par.params.container = divCol;				}				var content = par.el[par.funcion](par.params);				if (!par.container) {					divCol.append(content);				}				return div;			},			asignarMeta : function() {				var id = this.parent.menu.current;				var meta = data[id].meta;				$('title').html(meta.title);				for ( var key in meta) {					var value = meta[key];					var jMeta = $('meta[name="' + key + '"]');					if (jMeta.length === 0) {						jMeta = $('<meta/>', {							name : key						});						$('head').append(jMeta);					}					jMeta.attr('content', meta[key]);				}			},			mostrarCuerpo : function(parent, seccion, pantalla) {				if (parent) {					this.parent = parent;				}				this.asignarMeta();				var div = this.div;				if (typeof (div) === 'undefined') {					div = $('#cuerpo');				}				if (div.length === 0) {					div = $('<div/>', {						id : 'cuerpo',						'class' : 'global-content'					});					$('#pie').before(div);				}				this.div = div;				if (typeof (pantalla) === 'undefined') {					pantalla = this.parent.menu.current;				}				var itemMenu = this.parent.menu.buscarMenu(pantalla);				var showNo = itemMenu === null;				if (showNo) {					div.empty();					this.mostrarNo();				} else {					if (!itemMenu.noCambiar) {						div.empty();					}					this[itemMenu.funcion](this.parent);				}				this.parent.doPlaceholder();				if (seccion) {					$(document).scrollTop($("#" + seccion).offset().top);				}			},			mostrarCartel : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'cartel ' + par.color				});				if (par.marginTop) {					div.css('margin-top', par.marginTop);				}				if (par.marginBottom) {					div.css('margin-bottom', par.marginBottom);				}				if (par.container) {					par.container.append(div);				}				var divBorde1 = $('<div/>', {					id : par.id + '-borde1',					'class' : 'cartel-borde'				});				div.append(divBorde1);				if (typeof (par.text) !== 'object' || !par.text.length) {					par.text = [ par.text ];				}				var barHeight = parseInt(divBorde1.outerHeight(true));				var totalHeight = 0;				for (var i = 0; i < par.text.length; i++) {					var text = par.text[i];					var divText = $('<div/>', {						id : par.id + '-text' + i,						'class' : 'cartel-text',						style : 'top: ' + barHeight + 'px'					});					if (i > 0) {						divText.css('display', 'none');					}					div.append(divText);					divText.append(text);					if (totalHeight < divText.outerHeight()) {						totalHeight = divText.outerHeight();					}				}				var top = totalHeight + barHeight;				var divBorde2 = $('<div/>', {					id : par.id + '-borde2',					'class' : 'cartel-borde',					style : 'top: ' + totalHeight + 'px'				});				div.append(divBorde2);				this.cambiarCartel(div);				return div;			},			mostrarIconos : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'iconos ' + (par['class'] ? par['class'] : '')				});				var width = 100 / par.items.length;				if (par.withTopBorder) {					var divBorder = $('<div/>', {						'class' : 'separador iconos-border-top'					});					div.append(divBorder);				}				for (var i = 0; i < par.items.length; i++) {					var item = par.items[i];					var divImg = $('<div/>', {						'class' : 'icono',						style : 'width: ' + width + '%'					});					div.append(divImg);					var divAux = divImg;					if (item.link) {						var link = $('<a/>', {							href : item.link,							target : '_blank'						});						divImg.append(link);						divAux = link;					}					var img = $('<img/>', {						src : item.src					});					divAux.append(img);					if (item.handler) {						img.css('cursor', 'pointer');						img.on('click', item.handler);					}				}				if (par.withBottomBorder) {					var divBorder = $('<div/>', {						'class' : 'separador iconos-border-bottom'					});					div.append(divBorder);				}				return div;			},			mostrarBloqueTexto : function(par) {				var div = $('<div>', {					id : par.id,					'class' : 'texto-bloque '							+ (par['class'] ? par['class'] : '')				});				div.append(par.text);				if (par.container) {					par.container.append(div);				}				return div;			},			mostrarStock : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'stock'				});				div.append(data.stock.title);				if (par.marginTop) {					div.css('margin-top', par.marginTop);				}				var items = this.parent.parseItems(data.stock.items, 'src');				div.append(this.mostrarIconos({					id : par.id + '-iconos',					'class' : 'stock-iconos',					withTopBorder : true,					items : items				}));				return div;			},			mostrarTasadorInicio : function(par) {				var div = $('<div/>', {					id : par.id				});				if (par.container) {					par.container.append(div);				}				var cartel = this.mostrarCartel({					id : par.id + '-cartel',					text : par.title,					color : par.colorTitle,					marginTop : par.marginTop,					container : par.container ? div : undefined				});				if (!par.container) {					div.append(cartel);				}				var tasador = this.tasador.mostrarTasador({					id : par.id + 'tasador',					container : par.container ? div : undefined,					formulario : par.formulario				});				if (!par.container) {					div.append(tasador);				}				return div;			},			mostrarInicioIzq : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				div.append(this.mostrarBloqueTexto({					id : par.id + 'texto',					text : par.texto				}));				div.append(this.mostrarIconos({					id : par.id + '-iconos',					'class' : 'partners',					items : par.iconos				}));				return div;			},			mostrarInicioDer : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				this.mostrarCartel({					id : par.id + 'cartel',					text : par.title,					color : 'claro',					marginTop : par.marginTop,					container : div				});				div.append(par.parent.crearBoton({					id : par.id + '-youtube',					imagen : par.imagenYoutube,					href : par.hrefYoutube,					'class' : 'link-youtube'				}));				div.append(par.parent.crearImagen({					id : par.id + '-telemadrid',					src : par.imagen,					'class' : 'logo_telemadrid'				}));				div.append(this.mostrarBloqueTexto({					id : par.id + '-texto',					text : par.texto				}));				div.append(this.mostrarStock({					id : par.id + '-stock'				}));				return div;			},			mostrarInicio : function() {				this.visor = crearVisor();				var itemsVisor = this.parent.parseItems(						data.inicio.visor.items, 'src');				this.mostrarColumnas({					container : this.div,					items : [ {						el : this.visor,						funcion : 'crearVisorImagenes',						params : {							id : 'inicio-visor',							items : itemsVisor						}					}, {						el : this,						funcion : 'mostrarTasadorInicio',						params : {							id : 'tasador-inicio',							title : data.inicio.tasador.title.text,							colorTitle : data.inicio.tasador.title.color,							marginTop : '22px',							formulario : this.formulario						}					} ]				});				var itemsIconos = this.parent.parseItems(						data.inicio.iconos.items, 'src');				this.div.append(this.mostrarIconos({					id : 'iconos-inicio',					'class' : 'global-content',					withBottomBorder : true,					items : itemsIconos				}));				var itemsIzq = this.parent.parseItems(data.inicio.izq.iconos,						'src');				this.mostrarColumnas({					container : this.div,					items : [							{								el : this,								funcion : 'mostrarInicioIzq',								params : {									id : 'inicio-texto',									texto : data.inicio.izq.text,									iconos : itemsIzq								}							},							{								el : this,								funcion : 'mostrarInicioDer',								params : {									id : 'inicio-der',									title : data.inicio.der.title,									marginTop : '10px',									imagenYoutube : data.rutas.imagen											+ data.inicio.der.imagenYoutube,									hrefYoutube : data.inicio.der.hrefYoutube,									imagen : data.rutas.imagen											+ data.inicio.der.imagen,									texto : data.inicio.der.texto,									parent : this.parent								}							} ]				});				var itemsPie = this.parent.parseItems(data.inicio.pie.items,						'src');				this.div.append(this.mostrarIconos({					id : 'iconos-pie-inicio',					'class' : 'global-content',					withTopBorder : true,					items : itemsPie				}));			},			mostrarComoDer : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				var itemsVisor = this.parent.parseItems(data.como.visor.items,						'src');				this.visor.crearVisorImagenes({					id : 'como-visor',					container : div,					items : itemsVisor				});				this.mostrarTasadorInicio({					container : div,					id : 'tasador-como',					title : data.como.tasador.title,					colorTitle : data.como.tasador.color,					marginTop : '32px',					formulario : par.formulario				});				div.append(this.mostrarStock({					id : par.id + '-stock',					marginTop : '95px'				}));				return div;			},			mostrarComo : function() {				this.visor = crearVisor();				this.mostrarColumnas({					container : this.div,					items : [ {						el : this,						funcion : 'mostrarBloqueTexto',						params : {							id : 'como-texto',							text : data.como.texto						}					}, {						el : this,						funcion : 'mostrarComoDer',						params : {							id : 'como-der',							formulario : this.formulario						}					} ]				});			},			mostrarOpciones : function() {				var items = this.parent						.parseItems(data.opciones.items, 'image');				this.mostrarLista({					id : 'opciones-lista',					container : this.div,					'class' : '',					title : data.opciones.title,					titleCartel : data.opciones.titleCartel,					separador : true,					items : items				});			},			mostrarGestion : function() {				var itemsLista = this.parent.parseItems(						data.gestion.lista.items, 'image');				this.mostrarLista({					id : 'gestion-lista',					container : this.div,					'class' : '',					title : data.gestion.lista.title,					titleClass : 'lista-title-gestion',					image : data.rutas.imagen + data.gestion.lista.image,					items : itemsLista				});				this.mostrarBloqueTexto({					id : 'gestion-texto',					container : this.div,					text : data.gestion.text,					'class' : 'gestion-titulo-texto'				});				this.mostrarColumnas({					container : this.div,					items : [ {						el : this,						funcion : 'mostrarBloqueTexto',						params : {							id : 'gestion-cols-texto',							text : data.gestion.textoColumnas,							'class' : 'gestion-cols-texto'						}					}, {						el : this.tasador,						funcion : 'mostrarTasador',						params : {							id : 'gestion-tasador',							formulario : this.formulario						}					} ]				});			},			mostrarFaqDer : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				var itemsVisor = this.parent.parseItems(data.faq.visor.items,						'src');				this.visor.crearVisorImagenes({					id : 'gestion-visor',					container : div,					items : itemsVisor				});				this.tasador.mostrarTasador({					container : div,					id : 'tasador-faq',					formulario : par.formulario				});				this.mostrarBloqueTexto({					container : div,					id : 'faq-texto2',					text : par.text				});				return div;			},			mostrarFaq : function() {				this.visor = crearVisor();				this.mostrarColumnas({					container : this.div,					items : [ {						el : this,						funcion : 'mostrarBloqueTexto',						params : {							id : 'faq-texto',							text : data.faq.text1						}					}, {						el : this,						funcion : 'mostrarFaqDer',						params : {							id : 'faq-der',							text : data.faq.text2,							formulario : this.formulario						}					} ]				});			},			mostrarBlog : function() {				window.open(raw.blog);			},			mostrarFranquiciasDer : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				var itemsVisor = this.parent.parseItems(						data.franquicias.visor.items, 'src');				this.visor.crearVisorImagenes({					id : 'gestion-visor',					container : div,					items : itemsVisor				});				this.mostrarBloqueTexto({					container : div,					id : 'faq-texto2',					text : par.text,					'class' : 'cuadro-franquicias'				});				return div;			},			mostrarFranquicias : function() {				this.visor = crearVisor();				this.mostrarColumnas({					container : this.div,					items : [ {						el : this,						funcion : 'mostrarBloqueTexto',						params : {							id : 'franquicias-texto',							text : data.franquicias.text1						}					}, {						el : this,						funcion : 'mostrarFranquiciasDer',						params : {							id : 'franquicias-der',							text : data.franquicias.text2						}					} ]				});			},			mostrarMapa : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'contacto-div'				});				par.container.append(div);				var iframe = $('<iframe/>', {					width : 220,					height : 180,					frameborder : 0,					scrolling : 'no',					marginheight : 0,					marginwidth : 0,					src : par.src,					'class' : 'contacto-mapa'				});				div.append(iframe);				var divText = $('<div/>', {					id : par.id + '-text',					'class' : 'contacto-text'				});				div.append(divText);				var divTitulo = $('<h1/>', {					id : par.id + '-text-title'				});				divText.append(divTitulo);				divTitulo.append(par.title);				for (var i = 0; i < par.textos.length; i++) {					var item = par.textos[i];					var divItem = $('<p/>', {						id : par.id + '-text-item' + i					});					divText.append(divItem);					divItem.append(item);				}				var images = this.parent.parseItems(par.images, 'src');				div.append(this.mostrarIconos({					id : par.id + '-iconos',					'class' : 'mapa-iconos',					items : images				}));				return div;			},			mostrarContactoIzq : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				for (var i = 0; i < data.contacto.mapas.length; i++) {					var mapa = data.contacto.mapas[i];					this.mostrarMapa({						id : par.id + '-mapa' + i,						src : mapa.src,						title : mapa.title,						textos : mapa.textos,						images : mapa.images,						container : div					});				}				return div;			},			mostrarContactoDer : function(par) {				var div = $('<div/>', {					id : par.id,					'class' : 'container'				});				if (par.container) {					par.container.append(div);				}				this.mostrarCartel({					id : par.id + '-contacto-cartel',					color : 'oscuro',					marginTop : '30px',					marginBottom : '30px',					container : div,					text : data.contacto.titleCartel				});				this.mostrarBloqueTexto({					container : div,					id : 'contacto-texto',					text : data.contacto.text,					'class' : 'contacto-texto'				});				this.formulario.mostrarFormulario({					id : 'contacto-formulario',					container : div,					title : data.contacto.formulario.title,					fields : data.contacto.formulario.fields,					origen : 'web',					submit : function(idForm) {						data.contacto.formulario.submit(idForm);					},					withTopBorder : true				});				return div;			},			mostrarContacto : function() {				this.mostrarColumnas({					container : this.div,					items : [ {						el : this,						funcion : 'mostrarContactoIzq',						params : {							id : 'contacto-izq'						}					}, {						el : this,						funcion : 'mostrarContactoDer',						params : {							id : 'contacto-der'						}					} ]				});			},			mostrarNo : function() {				this.div.append('NO');			}		},		mostrarWebMovil : function() {			var body = $('body');			this.cuerpo.div = undefined;			this.mostrarCabeceraMovil({				container : body			});			var div = $('<div/>', {				'class' : 'global-content-movil'			});			body.append(div);			this.mostrarMenuMovil({				id : 'menu-movil',				container : div,				'class' : 'global-content-movil'			});			var items = this.parseItems(data.movil.lista, 'src');			this.mostrarListaMovil({				id : 'lista-movil',				container : div,				'class' : 'global-content-movil',				items : items			});			this.cuerpo.formulario.mostrarFormulario({				id : 'contacto-formulario',				container : div,				'class' : 'tasador-movil',				title : data.contacto.formulario.title,				fields : data.contacto.formulario.fields,				origen : 'movil',				submit : function(idForm) {					data.contacto.formulario.submit(idForm);				},				withTopBorder : true			});			this.mostrarPieMovil({				container : body			});		},		mostrarCabeceraMovil : function(par) {			var divCabecera = $('<div/>', {				'class' : 'cabecera-movil global-content-movil'			});			par.container.append(divCabecera);			var img = $('<img/>', {				src : data.rutas.imagen + data.movil.logo,				'class' : 'logo-movil'			});			divCabecera.append(img);			divCabecera.append('<br/>');			for (var i = 0; i < data.movil.logosTfno.length; i++) {				var link = $(raw.tfnoMovil);				link.empty();				divCabecera.append(link);				var img = $('<img/>', {					src : data.rutas.imagen + data.movil.logosTfno[i]				});				link.append(img);				divCabecera.append('&nbsp;');			}			divCabecera.append(raw.tfnoMovilLlamar);		},		mostrarMenuMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : par['class']			});			par.container.append(div);			var inicio = $('<div/>', {				id : par.id + '-inicio',				'class' : 'menu-item-movil menu-inicio-movil'			});			inicio.append(data.movil.menu.titulo);			div.append(inicio);			var divItems = $('<div/>', {				id : par.id + '-items',				'class' : 'menu-container-movil'			}).hide();			div.append(divItems);			for (var i = 0; i < data.movil.menu.items.length; i++) {				var item = data.movil.menu.items[i];				this.mostrarMenuItem({					container : divItems,					item : item,					id : par.id + '-' + item.id				});			}			inicio.on('click', function() {				$('.lista-text-movil').slideUp(500, function() {					$(this).remove();				});				divItems.slideToggle(500);			});			return div;		},		mostrarMenuItem : function(par) {			var me = this;			var itemMenu = $('<div/>', {				id : par.id,				'class' : 'menu-item-movil'			});			itemMenu.append(par.item.text);			par.container.append(itemMenu);			me[par.item.funcion]({				container : itemMenu,				id : par.id + '-content'			});			itemMenu.on('click', function() {				var item = $(this);				var panel = item.next();				panel.slideToggle();			});		},		mostrarListaMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : (par['class'] ? par['class'] : '')			});			if (par.container) {				par.container.append(div);			}			for (var i = 0; i < par.items.length; i++) {				var item = par.items[i];				if (par.container) {					item.container = div;				}				item.id = par.id + '-item-' + i;				var col = this.mostrarItemListaMovil(item);				if (!par.container) {					div.append(col);				}			}			return div;		},		mostrarItemListaMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : 'lista-item-movil'			});			if (par.container) {				par.container.append(div);			}			var divImage = $('<div/>', {				'class' : 'lista-image-movil'			});			div.append(divImage);			var img = $('<img/>', {				'src' : par.src			});			divImage.append(img);			var divTitle = $('<div/>', {				'class' : 'lista-title-movil'			});			divImage.append(divTitle);			divTitle.append(par.title);			div.on('click', function(e) {				var lastItem = $('.lista-text-movil');				var lastId = lastItem.attr('id');				var item = $(this);				var id = item.attr('id');				var index = id.split('-');				index = index[index.length - 1];				$('.menu-container-movil').slideUp(500);				lastItem.slideUp(500, function() {					$(this).remove()				});				if (lastId != id + '-text') {					var divText = $('<div/>', {						id : par.id + '-text',						'class' : 'lista-text-movil'					});					divText.hide();					div.after(divText);					for (var i = 0; i < par.text.length; i++) {						var text = '-' + par.text[i] + '<br/><br/>';						divText.append(text);					}					divText.slideToggle(500);				}			});			return div;		},		mostrarPieMovil : function(par) {			var div = $('<div/>', {				'class' : 'global-content-movil pie-movil'			});			par.container.append(div);			div.append(this.mostrarRedesSociales({				id : 'pie'			}));			var parrafo = data.pie.parrafos[1];			var divParrafo = $('<div/>', {				'class' : 'pie-parrafo-movil'			});			div.append(divParrafo);			for (var j = 0; j < parrafo.length; j++) {				var text = parrafo[j];				divParrafo.append(text);			}			var divLogo = $('<div/>', {				'class' : 'pie-logo-movil'			});			div.append(divLogo);			return div;		},		mostrarLlamamosMovil : function(par) {			var div = $('<div/>', {				'class' : 'llamamos-movil'			}).hide();			par.container.after(div);			var divFrame = $(					'<iframe/>',					{						src : 'http://www.panelcliente.net/c2c/simple.php?id=48&memberid=10060'					});			div.append(divFrame);			return div;		},		mostrarContactoMovil : function(par) {			var div = $('<div/>', {				'class' : 'global-content-movil contacto-movil'			}).hide();			par.container.after(div);			this.mostrarCartelMovil({				id : par.id + '-cartel',				container : div,				text : data.movil.contacto.cartel			});			this.mostrarTextoContactoMovil({				id : par.id + '-texto',				container : div,				texto : data.movil.contacto.texto			});			this.mostrarMapasMovil({				id : par.id + '-mapas',				container : div,				mapas : data.contacto.mapas			});			return div;		},		mostrarMapasMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : 'mapas-movil global-content-movil'			});			par.container.append(div);			for (var i = 0; i < par.mapas.length; i++) {				var mapa = par.mapas[i];				this.mostrarMapaItemMovil({					id : par.id + '-item' + i,					container : div,					mapa : mapa				});			}			return div;		},		mostrarMapaItemMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : 'mapas-movil-item'			});			par.container.append(div);			var separador = $('<div/>', {				'class' : 'separador-movil'			});			div.append(separador);			var link = $('<a/>', {				href : par.mapa.href			});			div.append(link);			div.append(this.crearBoton({				id : par.id + '-boton-mapa',				imagen : data.rutas.imagen + data.movil.contacto.iconoMapa,				href : par.mapa.href,				tagHover : '',				'class' : 'boton-google-movil',				text : 'COMO LLEGAR'			}));			var table = $('<table/>', {				'class' : 'contacto-mapa-tabla-movil'			});			div.append(table);			var rowH = $('<tr/>');			table.append(rowH);			var colH = $('<th/>', {				colspan : 2			});			rowH.append(colH);			colH.append(par.mapa.title);			for (var i = 0; i < par.mapa.textos.length; i++) {				var row = $('<tr/>');				table.append(row);				var texto = par.mapa.textos[i];				var col = $('<td/>');				row.append(col);				col.append(texto);				if (i % 2 === 0) {					var colImg = $('<td/>', {						rowspan : 2,						'class' : 'mapas-imagen-movil'					});					row.append(colImg);					var image = par.mapa.images[i / 2];					var img = $('<img/>', {						src : data.rutas.imagen + image.src					});					colImg.append(img);				}			}			return div;		},		mostrarTextoContactoMovil : function(par) {			var div = $('<div/>', {				id : par.id,				'class' : 'contacto-texto-movil'			});			par.container.append(div);			for (var i = 0; i < par.texto.length; i++) {				var texto = par.texto[i];				var divText = $('<div/>', {					'class' : 'contacto-texto-movil ' + texto['class']				});				divText.append(texto.text);				div.append(divText);			}			return div;		},		mostrarCartelMovil : function(par) {			var div = $('<div/>', {				'class' : 'cartel-movil'			});			par.container.append(div);			var divBorde1 = $('<div/>', {				'class' : 'cartel-borde-movil'			});			div.append(divBorde1);			var divText = $('<div/>', {				'class' : 'cartel-text-movil'			});			div.append(divText);			divText.append(par.text);			var divBorde2 = $('<div/>', {				'class' : 'cartel-borde-movil'			});			div.append(divBorde2);			return div;		}	};	return ret;}function crearVisor() {	var ret = {		selectedItem : 0,		items : [],		crearVisorImagenes : function(par) {			var me = this;			me.id = par.id;			var div = $('<div/>', {				id : par.id,				'class' : 'panel-visor'			});			par.container.append(div);			var divVisor = $('<div/>', {				id : par.id + '-visor',				'class' : 'visor'			});			div.append(divVisor);			var divIndex = $('<div/>', {				id : par.id + '-index',				'class' : 'visor-index'			});			div.append(divIndex);			var totalWidth = parseInt(divIndex.width());			var width = 0;			for (var i = 0; i < par.items.length; i++) {				var item = par.items[i];				this.items.push(item);				var jItem = $('<div/>', {					'class' : 'visor-item'				});				divIndex.append(jItem);				jItem.on('click', function() {					var own = $(this);					if (!own.hasClass('visor-item-selected')) {						var jItems = $('.visor-item');						var indexOwn = jItems.index(own);						var indexNext = me.selectedItem;						var next = jItems[indexNext];						var img = $('#' + par.id + '-visor-first');						var img2 = $('#' + par.id + '-visor-last');						var ownItem = me.items[indexOwn];						var nextItem = me.items[indexNext];						img2.attr('src', ownItem.src);						me.cambiarImagen(img, img2, divVisor, left, indexOwn);					}				});				if (this.selectedItem == i) {					jItem.addClass('visor-item-selected');				}				var auxWidth = parseInt(jItem.outerWidth());				width += auxWidth;			}			var divBar = $('<div/>', {				'class' : 'visor-bar'			});			width = totalWidth - width - 1;			divBar.css('width', width + 'px');			divIndex.prepend(divBar);			if (this.items.length > 0) {				var img = $('<img/>', {					id : par.id + '-visor-first',					src : this.items[this.selectedItem].src,					'class' : 'visor-first visor-image'				});				divVisor.append(img);				var widthContainer = parseInt(div.outerWidth(true));				var leftContainer = parseInt(div.offset().left);				var widthImage = parseInt(img.outerWidth());				var left = leftContainer + ((widthContainer - widthImage) / 2);				img.css('left', left + 'px');				if (this.items.length > 1) {					var img2 = $('<img/>', {						id : par.id + '-visor-last',						src : this.items[this.selectedItem + 1].src,						'class' : 'visor-last visor-image',						style : 'left: ' + left + 'px;'					});					divVisor.prepend(img2);					me.activarCambiarImagen(img, img2, divVisor, left);				}			}			return div;		},		cambiarIndex : function() {			var items = $('.visor-item');			var button = items[this.selectedItem];			var jButton = $(button);			jButton.toggleClass('visor-item-selected');		},		cambiarImagen : function(img, img2, container, left, newIndex) {			img.remove();			img2.attr('id', this.id + '-visor-first');			this.cambiarIndex();			this.selectedItem = newIndex;			this.cambiarIndex();			index = this.selectedItem + 1;			if (index >= this.items.length) {				index = 0;			}			img = $('<img/>', {				id : this.id + '-visor-last',				src : this.items[index].src,				'class' : 'visor-last visor-image',				style : 'left: ' + left + 'px;'			});			container.prepend(img);			this.activarCambiarImagen(img2, img, container, left);		},		activarCambiarImagen : function(img, img2, container, left) {			var me = this;			img.delay(5000).fadeOut(1000, function() {				var index = me.selectedItem + 1;				if (index >= me.items.length) {					index = 0;				}				me.cambiarImagen(img, img2, container, left, index);			});		}	};	return ret;}var web = crearWeb();if (true || web.esMovil()) {	$(document).ready(function() {		var pantalla = $('#pantalla');		if (pantalla.length > 0) {			pantalla = pantalla.attr('value');		} else {			pantalla = undefined;		}		web.mostrarWeb(pantalla);		web.doResize();	});}